var O=Object.defineProperty;var F=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var E=(a,t,u)=>t in a?O(a,t,{enumerable:!0,configurable:!0,writable:!0,value:u}):a[t]=u,g=(a,t)=>{for(var u in t||(t={}))Z.call(t,u)&&E(a,u,t[u]);if(F)for(var u of F(t))J.call(t,u)&&E(a,u,t[u]);return a};var D=(a,t,u)=>new Promise((h,c)=>{var f=l=>{try{d(u.next(l))}catch(s){c(s)}},r=l=>{try{d(u.throw(l))}catch(s){c(s)}},d=l=>l.done?h(l.value):Promise.resolve(l.value).then(f,r);d((u=u.apply(a,t)).next())});import{B as Q}from"./TableAction.vue_vue_type_script_lang.78313de0.js";import{T as B}from"./TableAction.0e53e3c2.js";import{D as W,aw as A,at as X,d as Y,f as ee,u as ue,r as i,b as w,bi as te,dN as ae,o as ne,c as oe,a as C,i as n,w as o,j as _,h as m,t as x,dS as le,as as se,N as ie,m as ce,dP as re,aZ as de,dr as pe}from"./index.8bb9f8e1.js";import{P as fe}from"./PlusOutlined.cd5b89e3.js";import"./vuedraggable.umd.c90a637d.js";import"./useDesignSetting.cbebf840.js";import"./VerticalRightOutlined.672ec935.js";import"./propTypes.5abfbe49.js";import"./FormOutlined.08f501f5.js";import"./ReloadOutlined.2ed2b72b.js";import"./componentSetting.152e7e8a.js";import"./QuestionCircleOutlined.7eff4913.js";import"./DownOutlined.c246ed4b.js";function _e(){return W.request({url:"/role/list",method:"GET"})}const me=[{title:"id",key:"id"},{title:"\u89D2\u8272\u540D\u79F0",key:"name"},{title:"\u8BF4\u660E",key:"explain"},{title:"\u662F\u5426\u9ED8\u8BA4\u89D2\u8272",key:"isDefault",render(a){return A(X,{type:a.isDefault?"success":"error"},{default:()=>a.isDefault?"\u662F":"\u5426"})}},{title:"\u521B\u5EFA\u65F6\u95F4",key:"create_date"}],he={class:"n-layout-page-header"},ve={class:"py-3 menu-list"},Me=Y({__name:"role",setup(a){const t=ee(),u=ue(),h=i(),c=i(!1),f=i(!1),r=i(!1),d=i(""),l=i([]),s=i([]),p=i(["console","step-form"]),T=w({pageSize:5,name:"xiaoMa"}),K=w({width:250,title:"\u64CD\u4F5C",key:"action",fixed:"right",render(e){return A(B,{style:"button",actions:[{label:"\u83DC\u5355\u6743\u9650",onClick:P.bind(null,e),ifShow:()=>!0,auth:["basic_list"]},{label:"\u7F16\u8F91",onClick:L.bind(null,e),ifShow:()=>!0,auth:["basic_list"]},{label:"\u5220\u9664",onClick:U.bind(null,e),ifShow:()=>!0,auth:["basic_list"]}]})}}),M=e=>D(this,null,function*(){return g(g({},m(T)),e),yield _e()});function N(e){console.log(e)}function R(){h.value.reload()}function S(e){e.preventDefault(),f.value=!0,setTimeout(()=>{c.value=!1,u.success("\u63D0\u4EA4\u6210\u529F"),R(),f.value=!1},200)}function L(e){console.log("\u70B9\u51FB\u4E86\u7F16\u8F91",e),t.push({name:"basic-info",params:{id:e.id}})}function U(e){console.log("\u70B9\u51FB\u4E86\u5220\u9664",e),u.info("\u70B9\u51FB\u4E86\u5220\u9664")}function P(e){d.value=`\u5206\u914D ${e.name} \u7684\u83DC\u5355\u6743\u9650`,p.value=e.menu_keys,c.value=!0}function V(e){p.value=[p.value,...e]}function q(e){s.value=e}function H(){s.value.length?s.value=[]:s.value=l.value.map(e=>e.key)}function $(){r.value?(p.value=[],r.value=!1):(p.value=le(l.value),r.value=!0)}return te(()=>D(this,null,function*(){const e=yield ae();s.value=e.list.map(v=>v.key),l.value=e.list})),(e,v)=>{const b=se,j=ie,y=ce,z=re,G=de,I=pe;return ne(),oe("div",null,[C("div",he,[n(b,{bordered:!1,title:"\u89D2\u8272\u6743\u9650\u7BA1\u7406"},{default:o(()=>[_(" \u9875\u9762\u6570\u636E\u4E3A Mock \u793A\u4F8B\u6570\u636E\uFF0C\u975E\u771F\u5B9E\u6570\u636E\u3002 ")]),_:1})]),n(b,{bordered:!1,class:"mt-4 proCard"},{default:o(()=>[n(m(Q),{columns:m(me),request:M,"row-key":k=>k.id,ref_key:"actionRef",ref:h,actionColumn:K,"onUpdate:checkedRowKeys":N},{tableTitle:o(()=>[n(y,{type:"primary"},{icon:o(()=>[n(j,null,{default:o(()=>[n(m(fe))]),_:1})]),default:o(()=>[_(" \u6DFB\u52A0\u89D2\u8272 ")]),_:1})]),action:o(()=>[n(m(B))]),_:1},8,["columns","row-key","actionColumn"])]),_:1}),n(I,{show:c.value,"onUpdate:show":v[0]||(v[0]=k=>c.value=k),"show-icon":!1,preset:"dialog",title:d.value},{action:o(()=>[n(G,null,{default:o(()=>[n(y,{type:"info",ghost:"","icon-placement":"left",onClick:H},{default:o(()=>[_(" \u5168\u90E8"+x(s.value.length?"\u6536\u8D77":"\u5C55\u5F00"),1)]),_:1}),n(y,{type:"info",ghost:"","icon-placement":"left",onClick:$},{default:o(()=>[_(" \u5168\u90E8"+x(r.value?"\u53D6\u6D88":"\u9009\u62E9"),1)]),_:1}),n(y,{type:"primary",loading:f.value,onClick:S},{default:o(()=>[_("\u63D0\u4EA4")]),_:1},8,["loading"])]),_:1})]),default:o(()=>[C("div",ve,[n(z,{"block-line":"",cascade:"",checkable:"","virtual-scroll":!0,data:l.value,expandedKeys:s.value,"checked-keys":p.value,style:{"max-height":"950px",overflow:"hidden"},"onUpdate:checkedKeys":V,"onUpdate:expandedKeys":q},null,8,["data","expandedKeys","checked-keys"])])]),_:1},8,["show","title"])])}}});export{Me as default};
